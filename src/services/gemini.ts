const PERSONAL_CONTEXT = `
Informações sobre Samuel Camargo:

Cargo Atual: Gerente de TI na Campsoft (desde agosto de 2023)
Localização: Barueri - São Paulo - BR
Contato: 
- Email: samuelcamargo1@gmail.com
- WhatsApp: +55 (11) 91481-0664
- LinkedIn: /samuelcamargoti
- GitHub: /samuelcamargo
- Instagram: @samuyoh
- Facebook: /samuel.camargo.5439

Formação Acadêmica:
1. Pós-graduação em Inteligência Artificial nos Negócios
   - Instituição: Universidade Anhembi Morumbi
   - Período: 2024-2025
   - Status: Em andamento
   - Foco: Aplicações práticas de IA em soluções empresariais

2. MBA em Gestão de Projetos
   - Instituição: Universidade Anhembi Morumbi
   - Período: 2023-2024
   - Status: Em andamento
   - Foco: Metodologias ágeis e gestão de projetos tecnológicos

3. Graduação em Gestão de TI
   - Instituição: Estácio
   - Período: 2013-2016
   - Foco: Gestão estratégica de tecnologia

4. Bacharel em Sistemas da Informação
   - Instituição: Universidade Bandeirante de São Paulo
   - Período: 2009-2012
   - Foco: Desenvolvimento de sistemas e arquitetura de software

Certificações e Cursos:

Certificações Técnicas:
1. AWS Certified Cloud Practitioner
   - Emissora: Amazon Web Services
   - Data: 2023
   - Foco: Fundamentos de Cloud Computing

2. Professional Scrum Master I (PSM I)
   - Emissora: Scrum.org
   - Data: 2022
   - Foco: Metodologias Ágeis e Scrum

3. PHP 8 Certified Engineer
   - Emissora: Zend
   - Data: 2022
   - Foco: Desenvolvimento PHP Avançado

Cursos e Especializações:

DevOps e Cloud:
- Docker Mastery (Udemy)
- Kubernetes for Developers
- AWS Cloud Architecture
- CI/CD with GitHub Actions
- Linux System Administration

Desenvolvimento:
- Advanced Node.js Development
- React and Next.js Master Course
- Laravel Advanced Patterns
- Clean Architecture in PHP
- TypeScript Professional
- API Design in Node.js
- Test-Driven Development (TDD)

Gestão e Liderança:
- Leadership in Tech Teams
- Project Management Professional
- OKRs Implementation
- Agile Team Management
- Conflict Resolution
- Strategic Planning

Experiência Profissional:

1. Gerente de TI - Campsoft (agosto de 2023 - Presente)
   Responsabilidades:
   - Liderança de equipes técnicas multidisciplinares
   - Implementação de metodologias ágeis (Scrum e Kanban)
   - Gestão estratégica de projetos de desenvolvimento
   - Otimização de processos e fluxos de trabalho
   - Mentoria técnica e desenvolvimento de talentos
   - Planejamento e execução de projetos complexos
   - Gestão de recursos e orçamentos
   - Tomada de decisões estratégicas em tecnologia
   Conquistas:
   - Redução de 40% no tempo de entrega de projetos
   - Implementação de cultura DevOps
   - Aumento de 60% na satisfação do cliente
   - Redução de 30% em custos operacionais

2. Líder Técnico - Campsoft (dezembro de 2020 - agosto de 2023)
   Responsabilidades:
   - Gerenciamento de equipes de desenvolvimento
   - Arquitetura de sistemas
   - Implementação de soluções e revisão de código
   - Code review e garantia de qualidade
   - Definição de padrões técnicos
   - Mentoria de desenvolvedores júnior e pleno
   - Desenvolvimento de soluções escaláveis
   - Integração de sistemas e APIs
   Conquistas:
   - Implementação de CI/CD reduzindo tempo de deploy em 70%
   - Padronização de código e documentação
   - Redução de 50% em bugs em produção
   - Aumento de 45% na produtividade da equipe

3. Programador Full Stack - Campsoft (julho de 2020 - dezembro de 2020)
   Responsabilidades:
   - Desenvolvimento de aplicações back-end e front-end
   - Utilização de PHP e JavaScript
   - Implementação de APIs RESTful
   - Criação de interfaces responsivas
   - Otimização de performance
   - Integração com sistemas legados
   - Manutenção e debug de aplicações
   Conquistas:
   - Desenvolvimento de nova arquitetura de microserviços
   - Implementação de testes automatizados
   - Melhoria de 40% no tempo de carregamento das aplicações

4. PHP Developer - Gmaxcorp (agosto de 2014 - julho de 2020)
   Responsabilidades:
   - Desenvolvimento de websites e e-commerce
   - Design de sistemas
   - Implantação e documentação
   - Levantamento de requisitos
   - Desenvolvimento de aplicações complexas
   - Otimização de performance
   - Integração com sistemas de pagamento
   Conquistas:
   - Implementação de diversos e-commerces de sucesso
   - Redução do tempo de carregamento das páginas
   - Aumento na taxa de conversão dos sites

5. Program Developer - Foursys (janeiro de 2013 - dezembro de 2013)
   Responsabilidades:
   - Manutenção de sistemas legados do Banco Bradesco
   - Desenvolvimento em VisualBasic
   - Criação de relatórios com Crystal Report
   - Otimização de processos bancários
   Conquistas:
   - Modernização de sistemas críticos
   - Redução no tempo de processamento de relatórios
   - Melhoria na qualidade dos dados

6. Systems Analyst - Top Website (maio de 2012 - outubro de 2012)
   Responsabilidades:
   - Análise e desenvolvimento de sistemas para internet
   - Planejamento de soluções web
   - Implementação de projetos web
   - Otimização de SEO
   Conquistas:
   - Entrega de projetos web complexos
   - Melhoria no ranking de SEO dos clientes
   - Implementação de boas práticas de desenvolvimento

7. Front End Developer - Habilis BR (janeiro de 2011 - maio de 2012)
   Responsabilidades:
   - Desenvolvimento front-end avançado
   - Especialização em CSS/CSS3
   - Desenvolvimento com JavaScript e jQuery
   - Integração com APIs
   - Criação de interfaces responsivas
   Conquistas:
   - Desenvolvimento de interfaces inovadoras
   - Implementação de padrões modernos de front-end
   - Melhoria na experiência do usuário

8. Analista de Planejamento - Teltelematica (janeiro de 2010 - dezembro de 2010)
   Responsabilidades:
   - Liderança de departamento com 800 funcionários
   - Gestão de equipe de telecomunicações
   - Elaboração e apresentação de relatórios
   - Análise de desempenho
   - Otimização de processos
   Conquistas:
   - Melhoria nos indicadores de desempenho da equipe
   - Implementação de novos processos de gestão
   - Redução de custos operacionais

Competências Técnicas:

Backend:
- PHP/Laravel (Avançado)
  * Desenvolvimento de APIs RESTful
  * Arquitetura MVC e Clean Architecture
  * Integração com diversos bancos de dados
  * Implementação de microserviços
  * Testes unitários e de integração
  * Cache e otimização de performance
  * Segurança e autenticação
  * Queues e jobs assíncronos

- Node.js (Avançado)
  * Express.js para APIs
  * Typescript em ambiente servidor
  * Integração com serviços cloud
  * Desenvolvimento de microserviços
  * GraphQL
  * WebSockets
  * Serverless Functions
  * Event-driven architecture

Frontend:
- React/Next.js (Avançado)
  * Desenvolvimento de SPAs e SSR
  * Gestão de estado com Context e Redux
  * Styled-components e Material-UI
  * Otimização de performance
  * Server Components
  * Static Site Generation
  * Incremental Static Regeneration
  * SEO e Web Vitals

- TypeScript/JavaScript (Avançado)
  * ES6+ features
  * Programação funcional
  * Testes automatizados
  * Design patterns
  * Web APIs modernas
  * Service Workers
  * PWA
  * Web Components

DevOps:
- Docker/Containers
  * Dockerfile otimização
  * Docker Compose
  * Container orchestration
  * Multi-stage builds
- CI/CD (GitHub Actions, Jenkins)
- Git (Controle de versão avançado)
- Linux/Shell Script
- AWS/Cloud Services
  * EC2, S3, RDS
  * Lambda Functions
  * CloudFront
  * Route 53

Banco de Dados:
- MySQL (Avançado)
  * Otimização de queries
  * Modelagem de dados
  * Procedures e triggers
  * Replicação e clustering
  * Performance tuning
  * Backup e recovery
- MongoDB (Intermediário)
  * Schema design
  * Aggregation pipeline
  * Indexação
- PostgreSQL (Intermediário)
  * PL/pgSQL
  * Particionamento
  * JSON operations

Arquitetura e Padrões:
- Clean Architecture
- SOLID Principles
- Design Patterns
- Domain-Driven Design (DDD)
- Test-Driven Development (TDD)
- Microservices Architecture
- Event Sourcing
- CQRS

Gestão:
- Metodologias Ágeis (Scrum Master Certificado)
- Kanban
- Gestão de Equipes
- Liderança Técnica
- OKRs e KPIs
- Gestão de Projetos
- Gestão de Riscos
- Gestão de Mudanças

Soft Skills:
- Liderança e Mentoria
- Comunicação Efetiva
- Resolução de Problemas
- Pensamento Analítico
- Trabalho em Equipe
- Adaptabilidade
- Gestão de Conflitos
- Tomada de Decisão
- Inteligência Emocional
- Negociação
- Pensamento Estratégico
- Gestão do Tempo

Idiomas:
- Português (Nativo)
- Inglês (Profissional - Leitura, Escrita e Conversação)
- Inglês Técnico (Avançado)

Perfil Profissional:
Sou um profissional apaixonado por tecnologia e inovação, com mais de 10 anos de experiência no desenvolvimento de software e gestão de equipes técnicas. Como Gerente de TI, combino habilidades técnicas sólidas com uma forte visão estratégica de negócios. Minha experiência abrange desde o desenvolvimento hands-on até a gestão de projetos complexos e liderança de equipes multidisciplinares.

Especializado em arquitetura de software e desenvolvimento full stack, mantenho-me constantemente atualizado com as últimas tendências tecnológicas, especialmente em áreas como IA e cloud computing. Minha abordagem de liderança é baseada em metodologias ágeis, focando em resultados mensuráveis e desenvolvimento contínuo da equipe.

Principais Conquistas:
- Implementação bem-sucedida de metodologias ágeis, aumentando a eficiência das entregas em 40%
- Liderança de projetos de transformação digital com impacto direto no crescimento do negócio
- Desenvolvimento e mentoria de equipes técnicas de alto desempenho
- Arquitetura e implementação de soluções escaláveis para grandes volumes de dados
- Otimização de processos de desenvolvimento, reduzindo o tempo de deploy em 60%
- Implementação de cultura DevOps resultando em entregas mais rápidas e confiáveis
- Redução de 50% nos custos de infraestrutura através de otimizações cloud
- Aumento de 90% na cobertura de testes do código
- Melhoria de 70% no tempo de resposta das aplicações

Objetivos Profissionais:
- Continuar expandindo conhecimentos em IA e Machine Learning
- Desenvolver soluções inovadoras que impactem positivamente o negócio
- Fortalecer a cultura de inovação e excelência técnica
- Contribuir para o crescimento e desenvolvimento da equipe
- Implementar práticas de desenvolvimento sustentável
- Liderar iniciativas de transformação digital
- Estabelecer padrões de qualidade e segurança
- Promover a adoção de novas tecnologias
`;

export async function chatWithGemini(prompt: string) {
  const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;
  
  if (!apiKey) {
    console.error('Chave da API Gemini não encontrada');
    return 'Desculpe, o serviço não está configurado corretamente.';
  }

  try {
    console.log('Iniciando chat com Gemini...');
    
    // Adiciona o contexto pessoal à prompt do usuário
    const contextualizedPrompt = `
Você é um assistente virtual amigável e profissional que possui duas funções:

1. Responder perguntas gerais sobre qualquer assunto, utilizando seu conhecimento como IA.
2. Responder perguntas específicas sobre Samuel Camargo usando o contexto abaixo.

${PERSONAL_CONTEXT}

Instruções para responder:
1. Se a pergunta for sobre Samuel Camargo, use APENAS as informações do contexto acima
2. Se a pergunta for sobre outros assuntos, use seu conhecimento geral como IA
3. Se a pergunta sobre Samuel não puder ser respondida com as informações fornecidas, diga que não tem essa informação específica
4. Mantenha um tom profissional e amigável
5. Responda sempre em português

Pergunta do usuário: ${prompt}
`;

    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`,
      {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [
                {
                  text: contextualizedPrompt
                }
              ]
            }
          ]
        })
      }
    );

    if (!response.ok) {
      const errorData = await response.text();
      console.error('Resposta de erro:', errorData);
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();
    console.log('Resposta completa:', data);
    
    const text = data.candidates[0].content.parts[0].text;
    console.log('Texto extraído:', text);
    
    return text;
  } catch (error) {
    console.error('Erro detalhado:', error);
    return 'Desculpe, ocorreu um erro ao processar sua mensagem. Por favor, tente novamente.';
  }
} 